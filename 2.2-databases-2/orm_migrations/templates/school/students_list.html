{% extends "school/base.html" %}
{% load static %}

<!-- Блок для задания заголовка страницы -->
{% block title %}Список учеников{% endblock %}

<!-- Блок для содержимого страницы -->
{% block content %}
  <!-- Создание контейнера для отображения информации -->
  <div class="row">
    <!-- Создание маркера списка для отображения студентов -->
    <ul>
      {% for student in students %}
        <!-- Элемент списка для каждого студента -->
        <li>
          <!-- Отображение имени и группы студента -->
          {{ student.name }} {{ student.group }}
          
          <!-- Разделитель для улучшения читаемости -->
          <br>
          
          <!-- Заголовок для секции преподавателей -->
          Преподаватели:
          
          <!-- Вложенный список для отображения преподавателей -->
          <ul>
            <!-- Проверяем наличие преподавателей у студента -->
            {% if student.teachers.all %}
              <!-- Цикл для перебора всех преподавателей студента -->
              {% for teacher in student.teachers.all %}
                <!-- Элемент списка для каждого преподавателя -->
                <li>{{ teacher.name }} ({{ teacher.subject }})</li>
              {% endfor %}
            {% else %}
              <!-- Сообщение, если у студента нет преподавателей -->
              <li>Нет преподавателей</li>
            {% endif %}
          </ul>
        </li>
      {% empty %}
        <!-- Сообщение, если список студентов пуст -->
        <li>Нет студентов</li>
      {% endfor %}
    </ul>
  </div>
{% endblock %}

<!-- Добавление отладочной информации -->
{% if debug %}
  <p>Режим отладки ВКЛЮЧЕН</p>
  {% for student in students %}
    <p>Ученик: {{ student.name }}, Количество преподавателей: {{ student.teachers.all.count }}</p>
  {% endfor %}
{% endif %}
